<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Cache-control" content="public">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
  
    <title>James Doyle | Build A Multi-lingual Laravel Site With Subdomains</title>
  
  <meta name="google-site-verification" content="KM-5h_iJ7JJsGeUp4ncEoYCBKft1ko1A4gBpjIzT0p4" />
  <link href="https://plus.google.com/109231487156400680487" rel="author publisher" />
  
  <meta itemprop="name" content="James Doyle">
  <meta property="og:site_name" content="ohdoylerules">
  <meta itemprop="url" content="https://ohdoylerules.com/web/build-a-multi-lingual-laravel-site-with-subdomains/">
  <meta itemprop="email" content="james2doyle@gmail.com">
  <meta property="og:url" content="https://ohdoylerules.com/web/build-a-multi-lingual-laravel-site-with-subdomains/">
  <meta itemprop="image logo" content="https://ohdoylerules.com/icons/logo.png">
  <meta property="og:image" content="https://ohdoylerules.com/icons/logo.png">
  <link rel="apple-touch-icon" sizes="57x57" href="https://ohdoylerules.com/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://ohdoylerules.com/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://ohdoylerules.com/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://ohdoylerules.com/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://ohdoylerules.com/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://ohdoylerules.com/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://ohdoylerules.com/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://ohdoylerules.com/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://ohdoylerules.com/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="https://ohdoylerules.com/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://ohdoylerules.com/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://ohdoylerules.com/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://ohdoylerules.com/icons/favicon-16x16.png">
  <link rel="manifest" href="https://ohdoylerules.com/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://ohdoylerules.com/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#333333">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@james2doyle">
  <meta name="twitter:title" content="Build A Multi-lingual Laravel Site With Subdomains">
  <meta name="twitter:creator" content="@james2doyle">
  <meta name="twitter:image" content="https://ohdoylerules.com/icons/logo.png">
  <meta name="twitter:domain" content="https://ohdoylerules.com/">
  <link rel="icon" href="https://ohdoylerules.com/icons/logo.svg">
  
  
    <link rel="dns-prefetch" href="https://c.disquscdn.com">
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Build A Multi-lingual Laravel Site With Subdomains">
    <meta property="article:author" content="James Doyle" />
    <meta property="article:section" content="Web" />
    <meta property="article:tag" content="laravel, php, locale, subdomain, routing, switch, multisite, multilingual, translation" />
    <meta itemprop="keywords" content="laravel, php, locale, subdomain, routing, switch, multisite, multilingual, translation">
    <meta property="og:keywords" content="laravel, php, locale, subdomain, routing, switch, multisite, multilingual, translation">
    
    
      <meta name="description" content="Have you ever wanted to use subdomains in Laravel to control logic, locale, or other functionality? Well, this example might help.">
      <meta itemprop="description" content="Have you ever wanted to use subdomains in Laravel to control logic, locale, or other functionality? Well, this example might help.">
      <meta property="og:description" content="Have you ever wanted to use subdomains in Laravel to control logic, locale, or other functionality? Well, this example might help.">
      <meta name="twitter:description" content="Have you ever wanted to use subdomains in Laravel to control logic, locale, or other functionality? Well, this example might help.">
    
  
  <link rel="dns-prefetch" href="https://www.google-analytics.com">
  <link rel="shortcut icon" href="https://ohdoylerules.com/favicon.ico" />
  <link rel="canonical" href="https://ohdoylerules.com/web/build-a-multi-lingual-laravel-site-with-subdomains/">
  <link rel="sitemap" type="application/xml" title="Sitemap" href="https://ohdoylerules.com/sitemap.xml" />
  <meta id="themes" name="themes" content="https://ohdoylerules.com/css/new.light.css,https://ohdoylerules.com/css/new.dark.css">
  <link id="stylesheet" rel="stylesheet" href="https://ohdoylerules.com/css/new.light.css">
  <style type="text/css">
    body {
      font-feature-settings: 'lnum' 1;
      font-variant-numeric: slashed-zero;
      text-rendering: geometricPrecision;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
      opacity: 0;
      transition: opacity 0.2s ease;
      will-change: opacity;
    }
    body.light, body.dark {
      opacity: 1;
    }
    .show-on-light,
    .show-on-dark {
      display: none;
    }
    .light .show-on-light,
    .dark .show-on-dark {
      display: block;
    }
    a.none {
      color: inherit;
      border: none;
      opacity: 1;
    }
    a.none:hover {
      background: none;
      opacity: 0.6;
    }
    .center {
      text-align: center;
    }
    .center img {
      max-width: 100%;
      height: auto;
    }
    pre {
      color: #f8f8f2;
      background-color: #282a36;
      -moz-tab-size: 4;
      -o-tab-size: 4;
      tab-size: 4;
    }
    pre code.language-diff span:nth-child(1n + 7) {
      color: #50fa7b;
    }
    .switch-wrapper {
      display: flex;
      align-items: center;
      position: absolute;
      top: 1rem;
      right: 2rem;
      font-size: 80%;
    }
    .switch {
      position: relative;
      margin: 0 0.4rem;
    }
    .switch input {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
      opacity: 0;
      cursor: pointer;
    }
    .switch label {
      display: flex;
      border-radius: 9999px;
      height: 0.8rem;
      width: 1.8rem;
      background-color: rgba(0, 0, 0, .1);
      border: 1px solid rgba(0, 0, 0, .3);
    }
    .switch input:checked + label {
      background-color: #357edd;
      border: 1px solid #357edd;
      justify-content: flex-end;
    }
    .switch div {
      width: calc(0.8rem - 2px);
      height: calc(0.8rem - 2px);
      border-radius: 9999px;
      border: 1px solid rgba(0, 0, 0, .3);
      background-color: #FFF;
    }
     
    body.dark table.highlight tr:nth-child(even) {
      background-color: rgb(246, 248, 250);
    }
    body.dark table.highlight td,
    body.dark table.highlight th {
      border-color: rgba(27,31,35,.3);
    }
  </style>
  <script type="text/javascript" charset="utf-8" defer>
    document.addEventListener('DOMContentLoaded', function() {
      
      const defaultIndex = window.matchMedia('(prefers-color-scheme)').media !== 'not all' ? '1' : '0';
      
      const activeIndex = JSON.parse(window.localStorage.getItem('activeIndex') || defaultIndex);

      const themes = document.getElementById('themes').content.split(',');
      const stylesheet = document.getElementById('stylesheet');
      if (stylesheet.href !== themes[activeIndex]) {
        stylesheet.href = themes[activeIndex];
      }

      document.body.className = activeIndex === 0 ? 'light' : 'dark';

      const theSwitch = document.getElementById('switch');
      theSwitch.checked = Boolean(activeIndex);
      theSwitch.addEventListener('change', function() {
        const newIndex = Number(this.checked);
        stylesheet.href = themes[newIndex];
        document.body.className = newIndex === 0 ? 'light' : 'dark';
        window.localStorage.setItem('activeIndex', newIndex);
      });
    });
  </script>
</head>
<body>
<div class="switch-wrapper">
  <div>Light</div>
  <div class="switch">
    <input id="switch" type="checkbox" style="display: none" />
    <label for="switch">
      <div></div>
    </label>
  </div>
  <div>Dark</div>
</div>

<div itemscope itemtype="http://schema.org/BlogPosting">
  <div class="container">
    <header class="grid -middle">
      <div class="cell menu">
        <h1 itemprop="name headline">Build A Multi-lingual Laravel Site With Subdomains</h1>
      </div>
    </header>
    <p><a href="https://ohdoylerules.com/" title="Go Back Home">Go home</a></p>
    <div class="the-loop">
      <div class="post-info">
        
        <span class="post-date" itemprop="datePublished">üïí August 25, 2019</span>
        
        
        &nbsp;&nbsp;&nbsp;
        
        <span class="post-category" itemprop="genre about">üè∑ Web</span>
        
      </div>
      <div itemprop="ArticleBody text" class="main-content"><p>OK, so you want to make Laravel a multi-lingual (or just multi-functional) site based off the subdomain? Cool. Must be an interesting project.</p>
<p>In order to test this on local development, we are going to use <a href="https://laravel.com/docs/5.8/valet">Valet</a>. Let&rsquo;s say our Laravel project folder is in <code>~/Sites/multisite</code>. We can use that as our base path moving forward. With Valet, we can set up subdomains with <code>valet link</code>.</p>
<p>I&rsquo;m going to pretend that we want to add support for a new subdomain for the French version of our site. I&rsquo;m also going to assume that your valet TLD is <code>.localhost</code> and your project is called <code>multisite.localhost</code>. The domain we are adding in this case, it will be <code>fr.multisite.localhost</code>.</p>
<p>So in order to get that subdomain setup locally, we just go to our site folder and run <code>valet link fr.multisite</code>. This will allow <code>fr.multisite.localhost</code> to route to the same Laravel setup as <code>multisite.localhost</code>. Beauty!</p>
<p>Well, first things first. Let&rsquo;s make a helper to grab the subdomain from the request. This will come in handy for a lot of the future logic switching or setting application state on a per-request basis.</p>
<p>Let&rsquo;s use a <code>macro</code> to add a new method to the <code>Request</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- a/app/Providers/AppServiceProvider.php
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/app/Providers/AppServiceProvider.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -3,6 +3,7 @@
</span><span style="font-weight:bold"></span> namespace App\Providers;

 use Illuminate\Support\ServiceProvider;
<span style="font-weight:bold">+use Illuminate\Http\Request;
</span><span style="font-weight:bold"></span>
 class AppServiceProvider extends ServiceProvider
 {
<span style="font-weight:bold">@@ -13,7 +14,14 @@ class AppServiceProvider extends ServiceProvider
</span><span style="font-weight:bold"></span>      */
     public function register()
     {
<span style="color:#8b080b">-        //
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+        // nice helper for getting the current subdomain
</span><span style="font-weight:bold">+        Request::macro(&#39;subdomain&#39;, function () {
</span><span style="font-weight:bold">+            $domain = request()-&gt;server-&gt;get(&#39;HTTP_HOST&#39;);
</span><span style="font-weight:bold">+            $split = explode(&#39;.&#39;, $domain, 3);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+            // get the subdomain or return null
</span><span style="font-weight:bold">+            return array_get($split, &#39;0&#39;, &#39;&#39;);
</span><span style="font-weight:bold">+        });
</span><span style="font-weight:bold"></span>     }
</code></pre></div><p>Now any &ldquo;request&rdquo; instance will have a new <code>subdomain</code> method that we can call.</p>
<p>We need a way to organize the details of each domain. We can use a <code>config</code> for this. So we are going to make a new one and fill it with some details:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- /dev/null
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/config/multisite.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -0,0 +1,25 @@
</span><span style="font-weight:bold"></span><span style="font-weight:bold">+&lt;?php
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+return [
</span><span style="font-weight:bold">+    // we are going to set this in a future middleware
</span><span style="font-weight:bold">+    &#39;active&#39; =&gt; null,
</span><span style="font-weight:bold">+    &#39;sites&#39; =&gt; [
</span><span style="font-weight:bold">+        &#39;en&#39; =&gt; [
</span><span style="font-weight:bold">+            &#39;default&#39; =&gt; true,
</span><span style="font-weight:bold">+            &#39;locale&#39; =&gt; &#39;en&#39;,
</span><span style="font-weight:bold">+            &#39;domain&#39; =&gt; &#39;http://multisite.localhost&#39;,
</span><span style="font-weight:bold">+            &#39;label&#39; =&gt; &#39;English&#39;,
</span><span style="font-weight:bold">+        ],
</span><span style="font-weight:bold">+        &#39;fr&#39; =&gt; [
</span><span style="font-weight:bold">+            &#39;locale&#39; =&gt; &#39;fr&#39;,
</span><span style="font-weight:bold">+            &#39;domain&#39; =&gt; &#39;http://fr.multisite.localhost&#39;,
</span><span style="font-weight:bold">+            &#39;label&#39; =&gt; &#39;Fran√ßais&#39;,
</span><span style="font-weight:bold">+        ],
</span><span style="font-weight:bold">+    ],
</span><span style="font-weight:bold">+];
</span></code></pre></div><p>Now, we need a way to map the requested domain to the correct locale. We take in our subdomain and then map it to the correct config item. In order to make this happen, we need to make a middleware. A middleware manipulates the request as it moves through our app. We aren&rsquo;t going to manipulate the request, we are just going to use the details in the request to set up more config settings.</p>
<p>Here we go:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- /dev/null
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/app/Http/Middleware/MultisiteMiddleware.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -0,0 +1,36 @@
</span><span style="font-weight:bold"></span><span style="font-weight:bold">+&lt;?php
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+namespace App\Http\Middleware;
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+use Illuminate\Support\Facades\App;
</span><span style="font-weight:bold">+use Closure;
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+class MultisiteMiddleware
</span><span style="font-weight:bold">+{
</span><span style="font-weight:bold">+    /**
</span><span style="font-weight:bold">+     * Handle an incoming request.
</span><span style="font-weight:bold">+     *
</span><span style="font-weight:bold">+     * @param  \Illuminate\Http\Request  $request
</span><span style="font-weight:bold">+     * @param  \Closure  $next
</span><span style="font-weight:bold">+     * @return mixed
</span><span style="font-weight:bold">+     */
</span><span style="font-weight:bold">+    public function handle($request, Closure $next)
</span><span style="font-weight:bold">+    {
</span><span style="font-weight:bold">+        $sites = collect(config(&#39;multisite.sites&#39;));
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        $defaultSite = $sites-&gt;firstWhere(&#39;default&#39;, true);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        $currentSite = $sites-&gt;get($request-&gt;subdomain(), $defaultSite);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        // put this subdomain in the `env`
</span><span style="font-weight:bold">+        putenv(&#39;SUBDOMAIN=&#39; . $currentSite[&#39;domain&#39;]);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        // make it easier to access the current site config
</span><span style="font-weight:bold">+        config()-&gt;set(&#39;multisite.active&#39;, $currentSite);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        // finally, set the app locale so translations load correctly
</span><span style="font-weight:bold">+        App::setLocale($currentSite[&#39;locale&#39;]);
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+        return $next($request);
</span><span style="font-weight:bold">+    }
</span><span style="font-weight:bold">+}
</span></code></pre></div><p>We got our new middleware, so we can enable it in the HTTP kernel array:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- a/app/Http/Kernel.php
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/app/Http/Kernel.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -14,6 +14,7 @@ class Kernel extends HttpKernel
</span><span style="font-weight:bold"></span>      * @var array
      */
     protected $middleware = [
<span style="font-weight:bold">+        \App\Http\Middleware\MultisiteMiddleware::class,
</span><span style="font-weight:bold"></span>         \App\Http\Middleware\TrustProxies::class,
         \App\Http\Middleware\CheckForMaintenanceMode::class,
         \Illuminate\Foundation\Http\Middleware\ValidatePostSize::class,
</code></pre></div><p>Great! When we make requests now, the <code>config('multisite.active')</code> is going to return a matched value from the multisite config. If the subdomain doesn&rsquo;t match, it will just return the default site config. In our case, the <code>en</code> one.</p>
<p>Since we are setting the locale, we are going to need to make sure there are translations available for all our text. We do this by adding new language files. These files are PHP files that just return plain arrays. These files go under <code>resources/lang/{locale}</code>. So for English (locale is <code>en</code>) we put our files under <code>resources/lang/en</code> and for French (or <code>fr</code>), we put the files under <code>resources/lang/fr</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- /dev/null
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/resources/lang/en/multisite.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -0,0 +1,11 @@
</span><span style="font-weight:bold"></span><span style="font-weight:bold">+&lt;?php
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+return [
</span><span style="font-weight:bold">+    &#39;site_title&#39; =&gt; &#39;English Multisite&#39;,
</span><span style="font-weight:bold">+    &#39;site_label&#39; =&gt; &#39;English&#39;,
</span><span style="font-weight:bold">+    &#39;welcome&#39; =&gt; &#39;Welcome&#39;,
</span><span style="font-weight:bold">+    &#39;welcome_message&#39; =&gt; &#39;Welcome to the site. You can change the locale by changing to a supported subdomain.&#39;,
</span><span style="font-weight:bold">+    &#39;switch_site&#39; =&gt; &#39;Switch site&#39;,
</span><span style="font-weight:bold">+];
</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- /dev/null
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/resources/lang/fr/multisite.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -0,0 +1,11 @@
</span><span style="font-weight:bold"></span><span style="font-weight:bold">+&lt;?php
</span><span style="font-weight:bold">+
</span><span style="font-weight:bold">+return [
</span><span style="font-weight:bold">+    &#39;site_title&#39; =&gt; &#39;Multisite Fran√ßais&#39;,
</span><span style="font-weight:bold">+    &#39;site_label&#39; =&gt; &#39;Fran√ßais&#39;,
</span><span style="font-weight:bold">+    &#39;welcome&#39; =&gt; &#39;Bienvenue&#39;,
</span><span style="font-weight:bold">+    &#39;welcome_message&#39; =&gt; &#39;Bienvenue sur le site. Vous pouvez changer les param√®tres r√©gionaux avec le sous-domaine.&#39;,
</span><span style="font-weight:bold">+    &#39;switch_site&#39; =&gt; &#39;Changer de site&#39;,
</span><span style="font-weight:bold">+];
</span></code></pre></div><p>We access these files in a similar way to a <code>config</code> value. We can use the <code>trans</code> function, or we can use the <code>@lang</code> blade directive. Either way, they take a string that represents the path to our array value that we want.</p>
<p>So, if I want to display the <code>site_title</code> from our <code>resources/lang/{locale}/multisite.php</code>, I would need to run <code>trans('multisite.site_title')</code>. Laravel will take care of the rest. If we are in a valid locale, great! We will get the correct language. If we are missing a translation for that key, it will fallback to whatever locale we have set in the <code>config/app.php</code> under the <code>fallback_locale</code> key. The default is <code>en</code>.</p>
<p>So how about the javascript side? How do we deal with JSON when working with this setup?</p>
<h4 id="javascript-and-json">JavaScript and JSON</h4>
<p>Well, if we set things up correctly, the domain should set the locale for us and as long as the URL is correct, we should be good to go!</p>
<p>We need to add an endpoint to get our JSON from. Let&rsquo;s just toss it into <code>routes/web.php</code> because we are animals like that:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#8b080b">--- a/routes/web.php
</span><span style="color:#8b080b"></span><span style="font-weight:bold">+++ b/routes/web.php
</span><span style="font-weight:bold"></span><span style="font-weight:bold">@@ -14,3 +14,7 @@
</span><span style="font-weight:bold"></span> Route::get(&#39;/&#39;, function () {
     return view(&#39;welcome&#39;);
 });
<span style="font-weight:bold">+
</span><span style="font-weight:bold">+Route::get(&#39;/locale&#39;, function () {
</span><span style="font-weight:bold">+    return response()-&gt;json(config(&#39;multisite.active&#39;), 200);
</span><span style="font-weight:bold">+});
</span></code></pre></div><p>Here, you can see we are just returning whatever the active site is. This will be a JSON object of the active site config. Nice!</p>
<h4 id="in-summation">In Summation</h4>
<p>Finally, let&rsquo;s update the <code>welcome.blade.php</code> just so we can see our changes in progress:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#ff79c6">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#ff79c6">html</span> <span style="color:#50fa7b">lang</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;{{ str_replace(&#39;_&#39;, &#39;-&#39;, app()-&gt;getLocale()) }}&#34;</span>&gt;
    &lt;<span style="color:#ff79c6">head</span>&gt;
        &lt;<span style="color:#ff79c6">meta</span> <span style="color:#50fa7b">charset</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;utf-8&#34;</span>&gt;
        &lt;<span style="color:#ff79c6">meta</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;viewport&#34;</span> <span style="color:#50fa7b">content</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;width=device-width, initial-scale=1&#34;</span>&gt;
        &lt;<span style="color:#ff79c6">title</span>&gt;@lang(&#39;multisite.site_title&#39;)&lt;/<span style="color:#ff79c6">title</span>&gt;
    &lt;/<span style="color:#ff79c6">head</span>&gt;
    &lt;<span style="color:#ff79c6">body</span>&gt;
        &lt;<span style="color:#ff79c6">p</span>&gt;
            @foreach (config(&#39;multisite.sites&#39;) as $site)
                &lt;<span style="color:#ff79c6">a</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;{{ $site[&#39;domain&#39;] }}&#34;</span>&gt;{{ $site[&#39;label&#39;] }}&lt;/<span style="color:#ff79c6">a</span>&gt;
            @endforeach
        &lt;/<span style="color:#ff79c6">p</span>&gt;
        &lt;<span style="color:#ff79c6">h1</span>&gt;@lang(&#39;multisite.welcome&#39;)&lt;/<span style="color:#ff79c6">h1</span>&gt;
        &lt;<span style="color:#ff79c6">p</span>&gt;@lang(&#39;multisite.welcome_message&#39;)&lt;/<span style="color:#ff79c6">p</span>&gt;

        &lt;<span style="color:#ff79c6">pre</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;ajax&#34;</span>&gt;&lt;/<span style="color:#ff79c6">pre</span>&gt;

        &lt;<span style="color:#ff79c6">script</span>&gt;
            <span style="color:#8be9fd;font-style:italic">document</span>.addEventListener(<span style="color:#f1fa8c">&#39;DOMContentLoaded&#39;</span>, () =&gt; {
                <span style="color:#6272a4">// call that endpoint we created in our route
</span><span style="color:#6272a4"></span>                fetch(<span style="color:#f1fa8c">&#39;/locale&#39;</span>, {
                    credentials<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;include&#39;</span>,
                    headers<span style="color:#ff79c6">:</span> {
                        accept<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;application/json&#39;</span>,
                        <span style="color:#6272a4">// make sure we set the language explicitly
</span><span style="color:#6272a4"></span>                        <span style="color:#f1fa8c">&#39;accept-language&#39;</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">document</span>.documentElement.lang
                    }
                })
                <span style="color:#6272a4">// do the fetch dance...
</span><span style="color:#6272a4"></span>                .then((res) =&gt; res.json())
                .then((data) =&gt; {
                    <span style="color:#ff79c6">const</span> ajaxField <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">document</span>.getElementById(<span style="color:#f1fa8c">&#39;ajax&#39;</span>);

                    <span style="color:#6272a4">// prepend this to the output
</span><span style="color:#6272a4"></span>                    ajaxField.innerHTML <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;// loaded via ajax\n&#39;</span>;
                    <span style="color:#6272a4">// put our JSON in but format it with 2 spaces
</span><span style="color:#6272a4"></span>                    ajaxField.innerHTML <span style="color:#ff79c6">+=</span> JSON.stringify(data, <span style="color:#ff79c6">null</span>, <span style="color:#bd93f9">2</span>);
                });
            });
        &lt;/<span style="color:#ff79c6">script</span>&gt;
    &lt;/<span style="color:#ff79c6">body</span>&gt;
&lt;/<span style="color:#ff79c6">html</span>&gt;
</code></pre></div><p>We should see something like this when we load up <code>multisite.localhost</code>:</p>
<div class="center">
  <a href="/images/multisite-demo.gif" target="_blank" title="laravel multi-lingual site demo"><img alt="laravel multi-lingual site demo" src="/images/multisite-demo.gif"></a>
</div>
<p>Wow! Amazing. So it works! Very nice. We now have the basis for a multilingual site based completely off subdomains and we didn&rsquo;t need to install any packages or do any weird magic!</p>
</div>
      <p><a href="https://ohdoylerules.com/" title="Go Back Home">Go home</a></p>
      <hr>
      <div class="media grid">
        <div class="media-left">
          <a href="https://twitter.com/james2doyle" target="_blank" class="post-author-link">
            <img src="https://www.gravatar.com/avatar/b7375c88e1864c4ddf0d7bdab58e4cca?s=120&amp;d=mm&amp;r=g" alt="James Doyle Profile Picture" width="120" height="120">
          </a>
        </div>
        <div class="media-body cell -9of12">
          <div class="media-heading"><h3 itemprop="author publisher creator provider">James Doyle</h3></div>
          <div class="media-content">
            <p>I'm a full-stack developer, co-organizer of <a href="https://www.meetup.com/vancouver-php" title="PHP Vancouver" target="_blank">PHP Vancouver</a> meetup, and winner of a <a href="http://www.canadianbusiness.com/innovation/developer-30-under-30-gallery/image/20/" title="Canadian Developer 30 under 30 award" target="_blank">Canadian Developer 30 under 30 award</a>. I'm a huge Open Source advocate and contributor to a lot of projects in my community. When I am not sitting at a computer, I'm trying to perfect some other skill.</p>
          </div>
        </div>
      </div>
      <hr>
      
        <div id="disqus_thread" itemprop="comment"></div>
        <script type="text/javascript">(function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//ohdoylerules.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })();</script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    </div>
  </div>
</div>


<script defer>
  
  
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js?384-128');
  }
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30413344-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  
</script>
</body>
</html>

