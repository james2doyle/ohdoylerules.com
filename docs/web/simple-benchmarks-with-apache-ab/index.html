<!doctype html><html lang=en><head><meta charset=utf-8><meta content=public http-equiv=Cache-control><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,maximum-scale=5" name=viewport><title>Simple Benchmarks With Apache AB | OhDoyleRules</title><meta content="Simple Benchmarks With Apache AB | OhDoyleRules" name=twitter:title><meta content=KM-5h_iJ7JJsGeUp4ncEoYCBKft1ko1A4gBpjIzT0p4 name=google-site-verification><meta content="Simple Benchmarks With Apache AB" itemprop=name><meta content=OhDoyleRules property=og:site_name><meta content=https://ohdoylerules.com/web/simple-benchmarks-with-apache-ab/ itemprop=url><meta content=james2doyle@gmail.com itemprop=email><meta content=https://ohdoylerules.com/web/simple-benchmarks-with-apache-ab/ property=og:url><meta itemprop="image logo" content=/icons/logo.png><meta content=/icons/logo.png property=og:image><link href=/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#333333 href=/icons/safari-pinned-tab.svg rel=mask-icon><link href=/icons/favicon.ico rel=icon sizes=any><link href=/icons/favicon.svg rel=icon type=image/svg+xml><meta content=/browserconfig.xml name=msapplication-config><meta content=#ffffff name=msapplication-TileColor><meta content=#ffffff name=theme-color><meta content=summary name=twitter:card><meta content=@james2doyle name=twitter:site><meta content="Simple Benchmarks With Apache AB" name=twitter:title><meta content=@james2doyle name=twitter:creator><meta content=/icons/logo.png name=twitter:image><meta content=/ name=twitter:domain><link href=/icons/logo.svg rel=icon><meta content="a tutorial for generating simple benchmarks using the Apache ab tool" name=description><meta content="a tutorial for generating simple benchmarks using the Apache ab tool" itemprop=description><meta content="a tutorial for generating simple benchmarks using the Apache ab tool" property=og:description><meta content="a tutorial for generating simple benchmarks using the Apache ab tool" name=twitter:description><meta content=article property=og:type><meta content="Simple Benchmarks With Apache AB | OhDoyleRules" property=og:title><meta content="james2doyle@gmail.com James Doyle" property=article:author><meta content="ab, apache, bench, load, test, request, mock, performance, response" itemprop=keywords><meta content="ab, apache, bench, load, test, request, mock, performance, response" property=article:tag><meta content="ab, apache, bench, load, test, request, mock, performance, response" property=og:keywords><link href=https://www.google-analytics.com rel=dns-prefetch><link rel="shortcut icon" href=/favicon.ico><link href=https://ohdoylerules.com/web/simple-benchmarks-with-apache-ab/ rel=canonical><link href=https://ohdoylerules.com/atom.xml rel=alternate title=atom type=application/atom+xml><style>:root{--b-font-main:system-ui,sans-serif;--b-font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--b-txt:#dcd7ba;--b-bg-1:#18171f;--b-bg-2:#2d4f67;--b-line:#727169;--b-link:#ffa066;--b-heading:#fff;--b-btn-bg:#2d4f67;--b-btn-txt:#c8c093;--b-focus:#2d4f67;--b-accent-1:#e6c384;--b-accent-2:#c34043;--b-selection-color:#c8c093;--b-selection-bg:#2d4f67}*,:before,:after{box-sizing:border-box}::selection{color:var(--b-selection-color);background-color:var(--b-selection-bg)}html:focus-within{scroll-behavior:smooth}body{background:var(--b-bg-1);max-width:70ch;font-family:var(--b-font-main);font-feature-settings:"lnum" 1;font-variant-numeric:slashed-zero;text-rendering:optimizeLegibility;color:var(--b-txt);-moz-tab-size:4;tab-size:4;word-break:break-word;overflow-wrap:break-word;-webkit-tap-highlight-color:#0000;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:auto;padding:0 1rem;line-height:1.5}h1,h2,h3,h4,h5,h6,p,ul,ol,dl,dd,details,blockquote,pre,figure,table,address,hr,fieldset,iframe,audio,video{margin:0 0 1.5rem}h1,h2,h3,h4,h5,h6{text-wrap:balance;color:var(--b-heading);margin-top:2rem;line-height:1.25}h1{font-size:2rem}h2{font-size:1.5rem}h3{font-size:1.25rem}h4{font-size:1rem}h5{font-size:.875rem}h6{font-size:.75rem}a{color:var(--b-link);text-decoration:underline}a:hover{text-decoration:underline}img,video,svg{max-width:100%;height:auto}embed,iframe,object{max-width:100%}iframe{border-style:none;width:100%;height:100%}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:700}blockquote{border-left:.25rem solid var(--b-accent-2);margin-left:0;padding:.5rem 0 .5rem 1.5rem}blockquote p{margin-bottom:0}small{font-size:.875rem}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}hr{border:0;border-bottom:1px solid var(--b-line);height:0}mark{background:var(--b-bg-2);color:var(--b-txt);border-radius:.25rem;padding:.125rem .25rem}pre,code,kbd,samp,tt,var{background:var(--b-bg-2);font-family:var(--b-font-mono);border-radius:.25rem;padding:.125rem .25rem;font-size:.875em}pre{white-space:pre;padding:1rem;overflow:auto}pre code{background-color:inherit;padding:0}p code{background-color:var(--b-bg-2);color:var(--b-accent-1)}details{background:var(--b-bg-2);border:1px solid var(--b-line);border-radius:.25rem;padding:.5rem 1rem;display:block}details[open]>summary{margin-bottom:1.5rem}summary{cursor:pointer;font-weight:700;display:list-item}summary:focus{box-shadow:none}table{border-collapse:collapse;text-indent:0;overflow-wrap:anywhere;width:100%}table caption{margin-bottom:.5rem}tr{border-bottom:1px solid var(--b-line)}td,th{word-break:normal;padding:.5rem 0 .5rem 1rem}td:first-child,th:first-child{padding-left:0}th{text-align:left}ul,ol,dd{padding-left:2rem}li>ul,li>ol{margin-bottom:0}fieldset{border:1px solid var(--b-line);border-radius:.25rem;padding:.5rem .75rem}legend{padding:0 .25rem}label{cursor:pointer;margin-bottom:.25rem;display:block}button,input,select,textarea{background:var(--b-bg-2);max-width:100%;font:inherit;color:var(--b-txt);border:0;border-radius:.25rem;margin:0;padding:.5rem .75rem;line-height:1.125}button,select{text-transform:none}select,[type=date],[type=datetime-local],[type=datetime],[type=email],[type=month],[type=number],[type=password],[type=search],[type=tel],[type=text],[type=time],[type=url],[type=week]{width:100%}[type=image],[type=checkbox],[type=radio]{cursor:pointer}[type=color]{min-height:2.125rem}select:not([multiple]):not([size]){-webkit-appearance:none;-moz-appearance:none;appearance:none;background-position:right .5rem center;background-repeat:no-repeat;padding-right:1.5rem}textarea{resize:vertical;width:100%}textarea:not([rows]){height:8rem}button{touch-action:manipulation}button,[type=button],[type=submit],[type=reset]{-webkit-appearance:button;text-align:center;white-space:nowrap;background:var(--b-btn-bg);color:var(--b-btn-txt);cursor:pointer;border:0;transition:opacity .25s;display:inline-block}button:hover,[type=button]:hover,[type=submit]:hover,[type=reset]:hover{opacity:.75}button[disabled],[type=button][disabled],[type=submit][disabled],[type=reset][disabled]{opacity:.5}progress{vertical-align:baseline}[type=search]{-webkit-appearance:none;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.5}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted buttontext}:-moz-ui-invalid{box-shadow:none}[aria-busy=true]{cursor:progress}[aria-disabled=true],[disabled]{cursor:not-allowed}:focus,details:focus-within{box-shadow:0 0 0 2px var(--b-focus);outline:none}@media (prefers-reduced-motion:reduce){html:focus-within{scroll-behavior:auto}*,:before,:after{background-attachment:initial!important;scroll-behavior:auto!important;transition-delay:0!important;transition-duration:0!important;animation-duration:1ms!important;animation-iteration-count:1!important;animation-delay:-1ms!important}}select:not([multiple]):not([size]){background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23eceff4'%3E%3Cpath d='M5 6l5 5 5-5 2 1-7 7-7-7 2-1z'/%3E%3C/svg%3E")}.post-info,.center img{margin-bottom:1rem}a.none{color:inherit;opacity:1;border:none}a.none:hover{opacity:.6;background:0 0}.center{text-align:center}.center a{display:block}html.is-changing .transition-fade{view-transition-name:main}::view-transition-old(main){animation:.25s ease-in-out both fade}::view-transition-new(main){animation:.25s ease-in-out reverse both fade}@keyframes fade{0%{opacity:1}to{opacity:0}}html.is-changing:not(.swup-native) .transition-fade{will-change:opacity;opacity:1;transition:opacity .25s}html.is-animating:not(.swup-native) .transition-fade{opacity:0}.render-later{content-visibility:auto;contain-intrinsic-size:auto 166px}</style><style>.center img{max-width:100%;height:auto}pre code.language-diff span:nth-child(n+7){color:#50fa7b}iframe{border:0;min-height:300px;margin:0}.gist-iframe{filter:invert()hue-rotate(180deg)brightness();background-color:#fff}body table.highlight tr:nth-child(2n){background-color:#f6f8fa}body table.highlight td,body table.highlight th{border-color:#1b1f234d}.grid{gap:1rem;display:flex}</style><body><main class=transition-fade id=swup><header class=center><h1 itemprop="name headline">Simple Benchmarks With Apache AB</h1></header><hr><div itemscope itemtype=http://schema.org/BlogPosting><div><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><article><section class=post-info><span itemprop=datePublished> ðŸ•’Â Â  <time datetime=2015-09-22T00:00:00>September 22, 2015</time> </span></section><div itemprop="ArticleBody text" class=main-content><h3 id=why-benchmark>Why Benchmark?</h3><p>Did you know that Apache has a benchmarking tool for testing the HTTP server? It is called <a rel="noopener nofollow noreferrer" title="Apache ab" href=http://httpd.apache.org/docs/2.4/programs/ab.html target=_blank>ab</a>, and it is pretty great!<p>As your site grows in popularity, complexity, or size, you will want to test the site to see how it preforms. Having the site crash or lock up during peak time can be devastating for a small blog or e-commerce site. It means lost revenue, and can leave a visitor with a bad impression of your site. This can drive them to generate a bad referral, or worse, go to your competitor.<p>Users aren't going to care if your site is being bombarded with traffic constantly, they really only care about <em>their own personal experience</em>.<p><a href="https://blog.kissmetrics.com/loading-time/?wide=1" rel="noopener nofollow noreferrer" title="Kiss Metrics loading time infographic" target=_blank>Studies and analytics show</a> that the slower your site is, the impact on your sales or target actions is affected exponentially.<h3 id=getting-ab>Getting ab</h3><p>The <code>ab</code> tool can be found in most default Apache (httpd 2.2 and 2.4) setups. If you don't have it, you can install the <code>apache2-utils</code> package and get it from there.<h3 id=testing>Testing</h3><p>I found <a rel="noopener nofollow noreferrer" title="Load testing apache with ab apache bench" href=https://www.devside.net/wamp-server/load-testing-apache-with-ab-apache-bench target=_blank>a great article on this site</a> that explains a lot of details about using ab, setting up Apache, configuring PHP, and information about the results. You should check it out.<p>I used the following script, based on that article above, that tests a site in succession and prints the results to a file.</p><iframe class="gist-iframe iframes" srcdoc="<script src='https://gist.github.com/james2doyle/1b77386317af93a0e5b2.js'></script>" id=https://gist.github.com/james2doyle/1b77386317af93a0e5b2.js src=about:blank></iframe><p>To run the script, download it and unzip it. Then run <code>chmod +x bench.sh</code> to allow the script to run. Then you can use <code>./bench</code> and the script will begin.<p>The article I linked to above mentioned using a <a rel="noopener nofollow noreferrer" title="Load testing apache with ab apache bench" href=https://www.devside.net/wamp-server/load-testing-apache-with-ab-apache-bench target=_blank>delay of 4 minutes</a> between running <code>ab</code>.<p>Be careful using <code>ab</code>, as it essentially emulates a DDOS attack, in that it generates as many requests as possible as fast as possible. There is no delay option in ab, so there is no way to emulate something like "10 hits every 10 seconds" or anything like that.<h3 id=results>Results</h3><p>Here are the things you are going to want to pay attention to. These definitions are taken from the <a rel="noopener nofollow noreferrer" title="Apache ab" href=http://httpd.apache.org/docs/2.4/programs/ab.html target=_blank>ab site</a>.<ul><li><strong>Failed requests:</strong> The number of requests that were considered a failure. If the number is greater than zero, another line will be printed showing the number of requests that failed due to connecting, reading, incorrect content length, or exceptions.<li><strong>Non-2xx responses:</strong> The number of responses that were not in the 200 series of response codes. If all responses were 200, this field is not printed.<li><strong>Requests per second:</strong> This is the number of requests per second. This value is the result of dividing the number of requests by the total time taken.<li><strong>Time per request:</strong> The average time spent per request. The first value is calculated with the formula (concurrency * timetaken * 1000 / done) while the second value is calculated with the formula (timetaken * 1000 / done).</ul><p>Failures and errors are generally not good. You should check your logs for anything that happened during your requests.<p>For <em>Requests Per Second</em>, this tells you how quickly your site was able to process all those requests. Higher is better because it means that your site was able to serve the content without hiccups.<p>The <em>Time Per Request</em>, although that article says it isn't important in the context of ab, I think it is still important to watch. This metric tells you how long the average request takes. Keep in mind we don't have javascript running, or</div><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><hr><div class="media grid"><div class=media-left><a class=post-author-link href=https://twitter.com/james2doyle target=_blank> <img alt="James Doyle Profile Picture" src="https://www.gravatar.com/avatar/b7375c88e1864c4ddf0d7bdab58e4cca?s=120&d=mm&r=g" height=120 width=120> </a></div><div class="media-body cell -9of12"><div class=media-heading><h3 itemprop="author publisher creator provider">James Doyle</h3></div><div class=media-content><p>I'm a full-stack developer, co-organizer of <a title="PHP Vancouver" href=https://www.meetup.com/vancouver-php target=_blank>PHP Vancouver</a> meetup, and winner of a <a title="Canadian Developer 30 under 30 award" href=http://www.canadianbusiness.com/innovation/developer-30-under-30-gallery/image/20/ target=_blank>Canadian Developer 30 under 30 award</a>. I'm a huge Open Source advocate and contributor to a lot of projects in my community. When I am not sitting at a computer, I'm trying to perfect some other skill.</div></div></div></article></div></div></main><script defer src=https://unpkg.com/swup@4.8.1/dist/Swup.umd.js></script><script>function handleGists() {
  const scripts = document.querySelectorAll('.iframes');
  [...scripts].forEach(function(iframe) {
    iframe.onload = function() {
      iframe.style.height = iframe.contentWindow.document.body.scrollHeight + 16 + 'px';
    }
    iframe.style.height = iframe.contentWindow.document.body.scrollHeight + 16 + 'px';
  });
}
document.addEventListener('DOMContentLoaded', function() {
  handleGists();
  const swup = new Swup({
    native: true,
  });
  swup.hooks.on('visit:end', handleGists, { priority: 100 });
});</script>