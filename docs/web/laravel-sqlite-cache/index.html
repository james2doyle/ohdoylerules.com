<!doctype html><html lang=en><head><meta charset=utf-8><meta content=public http-equiv=Cache-control><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,maximum-scale=5" name=viewport><title>Using Sqlite As A Cache In Laravel | OhDoyleRules</title><meta content="Using Sqlite As A Cache In Laravel | OhDoyleRules" name=twitter:title><meta content=KM-5h_iJ7JJsGeUp4ncEoYCBKft1ko1A4gBpjIzT0p4 name=google-site-verification><meta content="Using Sqlite As A Cache In Laravel" itemprop=name><meta content=OhDoyleRules property=og:site_name><meta content=https://ohdoylerules.com/web/laravel-sqlite-cache/ itemprop=url><meta content=james2doyle@gmail.com itemprop=email><meta content=https://ohdoylerules.com/web/laravel-sqlite-cache/ property=og:url><meta itemprop="image logo" content=/icons/logo.png><meta content=/icons/logo.png property=og:image><link href=/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#333333 href=/icons/safari-pinned-tab.svg rel=mask-icon><link href=/icons/favicon.ico rel=icon sizes=any><link href=/icons/favicon.svg rel=icon type=image/svg+xml><meta content=/browserconfig.xml name=msapplication-config><meta content=#ffffff name=msapplication-TileColor><meta content=#ffffff name=theme-color><meta content=summary name=twitter:card><meta content=@james2doyle name=twitter:site><meta content="Using Sqlite As A Cache In Laravel" name=twitter:title><meta content=@james2doyle name=twitter:creator><meta content=/icons/logo.png name=twitter:image><meta content=/ name=twitter:domain><link href=/icons/logo.svg rel=icon><meta content="How to use Sqlite as a cache in Laravel" name=description><meta content="How to use Sqlite as a cache in Laravel" itemprop=description><meta content="How to use Sqlite as a cache in Laravel" property=og:description><meta content="How to use Sqlite as a cache in Laravel" name=twitter:description><link href=https://c.disquscdn.com rel=dns-prefetch><meta content=article property=og:type><meta content="Using Sqlite As A Cache In Laravel | OhDoyleRules" property=og:title><meta content="james2doyle@gmail.com James Doyle" property=article:author><meta content="cache, laravel, sqlite, store" itemprop=keywords><meta content="cache, laravel, sqlite, store" property=article:tag><meta content="cache, laravel, sqlite, store" property=og:keywords><link href=https://www.google-analytics.com rel=dns-prefetch><link rel="shortcut icon" href=/favicon.ico><link href=https://ohdoylerules.com/web/laravel-sqlite-cache/ rel=canonical><link href=https://ohdoylerules.com/atom.xml rel=alternate title=atom type=application/atom+xml><style>body{font-feature-settings:'lnum' 1;font-variant-numeric:slashed-zero;text-rendering:geometricPrecision;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}.post-info{margin-bottom:1rem}a.none{color:inherit;border:none;opacity:1}a.none:hover {background:none;opacity:.6}.center{text-align:center}.center img{max-width:100%;height:auto}pre{color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre code.language-diff span:nth-child(1n + 7){color:#50fa7b}body.dark table.highlight tr:nth-child(even){background-color:#f6f8fa}body.dark table.highlight td,body.dark table.highlight th{border-color:rgba(27,31,35,.3)}html.is-changing .transition-fade{view-transition-name:main}:view-transition-old(main){animation:fade .25s ease-in-out both}:view-transition-new(main){animation:fade .25s ease-in-out both reverse}@keyframes fade{from{opacity:1}to{opacity:0}}html.is-changing:not(.swup-native) .transition-fade {will-change:opacity;transition:.25s opacity;opacity:1}html.is-animating:not(.swup-native) .transition-fade {opacity:0}:root{--nc-font-sans:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--nc-font-mono:Consolas,monaco,'Ubuntu Mono','Liberation Mono','Courier New',Courier,monospace;--nc-tx-1:#fff;--nc-tx-2:#eee;--nc-bg-1:#000;--nc-bg-2:#111;--nc-bg-3:#222;--nc-lk-1:#3291ff;--nc-lk-2:#0070f3;--nc-lk-tx:#fff;--nc-ac-1:#7928ca;--nc-ac-tx:#fff}@media (prefers-color-scheme:dark){:root{--nc-tx-1:#fff;--nc-tx-2:#eee;--nc-bg-1:#000;--nc-bg-2:#111;--nc-bg-3:#222;--nc-lk-1:#3291ff;--nc-lk-2:#0070f3;--nc-lk-tx:#fff;--nc-ac-1:#7928ca;--nc-ac-tx:#fff}}*{margin:0;padding:0}address,area,article,aside,audio,blockquote,datalist,details,dl,fieldset,figure,form,iframe,img,input,meter,nav,ol,optgroup,option,output,p,pre,progress,ruby,section,table,textarea,ul,video{margin-bottom:1rem}button,html,input,select{font-family:var(--nc-font-sans)}body{margin:0 auto;max-width:750px;padding:2rem;border-radius:6px;overflow-x:hidden;word-break:break-word;overflow-wrap:break-word;background:var(--nc-bg-1);color:var(--nc-tx-2);font-size:1.03rem;line-height:1.5}:selection{background:var(--nc-ac-1);color:var(--nc-ac-tx)}h1,h2,h3,h4,h5,h6{line-height:1;color:var(--nc-tx-1);padding-top:.875rem}h1,h2,h3{color:var(--nc-tx-1);padding-bottom:2px;margin-bottom:8px;border-bottom:1px solid var(--nc-bg-2)}h4,h5,h6{margin-bottom:.3rem}h1{font-size:2.25rem}h2{font-size:1.85rem}h3{font-size:1.55rem}h4{font-size:1.25rem}h5{font-size:1rem}h6{font-size:.875rem}a{color:var(--nc-lk-1)}a:hover{color:var(--nc-lk-2)}abbr:hover{cursor:help}blockquote{padding:1.5rem;background:var(--nc-bg-2);border-left:5px solid var(--nc-bg-3)}abbr{cursor:help}blockquote:last-child{padding-bottom:0;margin-bottom:0}header{background:var(--nc-bg-2);border-bottom:1px solid var(--nc-bg-3);padding:2rem 1.5rem;margin:-2rem calc(0px - (50vw - 50%)) 2rem;padding-left:calc(50vw - 50%);padding-right:calc(50vw - 50%)}header h1,header h2,header h3{padding-bottom:0;border-bottom:0}header>:first-child{margin-top:0;padding-top:0}header>:last-child{margin-bottom:0}a button,button,input[type=button],input[type=reset],input[type=submit]{font-size:1rem;display:inline-block;padding:6px 12px;text-align:center;text-decoration:none;white-space:nowrap;background:var(--nc-lk-1);color:var(--nc-lk-tx);border:0;border-radius:4px;box-sizing:border-box;cursor:pointer}a button[disabled],button[disabled],input[type=button][disabled],input[type=reset][disabled],input[type=submit][disabled]{cursor:not-allowed;opacity:.5}.button:focus,.button:hover,button:focus,button:hover,input[type=button]:focus,input[type=button]:hover,input[type=reset]:focus,input[type=reset]:hover,input[type=submit]:focus,input[type=submit]:hover{background:var(--nc-lk-2)}code,kbd,pre,samp{font-family:var(--nc-font-mono)}code,kbd,pre,samp{background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px;padding:3px 6px;font-size:.9rem}kbd{border-bottom:3px solid var(--nc-bg-3)}pre{padding:1rem 1.4rem;max-width:100%;overflow:auto}pre code{background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}code pre{display:inline;background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}details{padding:.6rem 1rem;background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px}summary{cursor:pointer;font-weight:700}details[open]{padding-bottom:.75rem}details[open] summary{margin-bottom:6px}details[open]>:last-child{margin-bottom:0}dt{font-weight:700}dd:before{content:'â†’ '}hr{border:0;border-bottom:1px solid var(--nc-bg-3);margin:1rem auto}fieldset{margin-top:1rem;padding:2rem;border:1px solid var(--nc-bg-3);border-radius:4px}legend{padding:auto .5rem}table{border-collapse:collapse;width:100%}td,th{border:1px solid var(--nc-bg-3);text-align:left;padding:.5rem}th{background:var(--nc-bg-2)}tr:nth-child(even){background:var(--nc-bg-2)}table caption{font-weight:700;margin-bottom:.5rem}textarea{max-width:100%}ol,ul{padding-left:2rem}li{margin-top:.4rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}mark{padding:3px 6px;background:var(--nc-ac-1);color:var(--nc-ac-tx)}input,select,textarea{padding:6px 12px;margin-bottom:.5rem;background:var(--nc-bg-2);color:var(--nc-tx-2);border:1px solid var(--nc-bg-3);border-radius:4px;box-shadow:none;box-sizing:border-box}img{max-width:100%}iframe{border:0;width:100%;height:100%;min-height:300px}</style><style media=screen>body .gist table.highlight tr:nth-child(even){background-color:inherit}.gist{font-size:18px}.clone-url-button > .clone-url-link,.gist-file,.gist-meta,.octotree_toggle,a.button,a.minibutton,button.button,button.minibutton,span.button,span.minibutton,ul.comparison-list > li.title{background:linear-gradient(#202020,#181818)!important;border-color:#383838!important;border-radius:0 0 3px 3px!important;text-shadow:none!important;color:#b5b5b5!important}#facebox pre,#notebook .input_area,.CodeMirror,.api code,.api pre,.blob-code-context,.blob-expanded,.copyable-terminal,.highlight,.markdown-body .highlight pre,.markdown-body pre,.markdown-format .highlight pre,.markdown-format code,.markdown-format pre,.terminal,body.blog pre,body.blog pre > code{background-color:#1d1f21!important;color:#c5c8c6!important}.gist .blob-code{padding:1px 10px!important;text-align:left;background:#000;border:0}:selection{background:#24890d;color:#fff;text-shadow:none}:-moz-selection{background:#24890d;color:#fff;text-shadow:none}.blob-num{padding:10px 8px 9px;text-align:right;color:#6b6b6b!important;border:0}.blob-code,.blob-code-inner{color:#c5c8c6!important}.pl-c,.pl-c span{color:#969896!important;font-style:italic!important}.pl-c1{color:#de935f!important}.pl-cce{color:#de935f!important}.pl-cn{color:#de935f!important}.pl-coc{color:#de935f!important}.pl-cos{color:#b5bd68!important}.pl-e{color:#f0c674!important}.pl-ef{color:#f0c674!important}.pl-en{color:#f0c674!important}.pl-enc{color:#de935f!important}.pl-enf{color:#f0c674!important}.pl-enm{color:#f0c674!important}.pl-ens{color:#de935f!important}.pl-ent{color:#b294bb!important}.pl-entc{color:#f0c674!important}.pl-enti{color:#f0c674!important;font-weight:700!important}.pl-entm{color:#c66!important}.pl-eoa{color:#b294bb!important}.pl-eoac{color:#c66!important}.pl-eoac .pl-pde{color:#c66!important}.pl-eoai{color:#b294bb!important}.pl-eoai .pl-pde{color:#b294bb!important}.pl-eoi{color:#f0c674!important}.pl-k{color:#b294bb!important}.pl-ko{color:#b294bb!important}.pl-kolp{color:#b294bb!important}.pl-kos{color:#de935f!important}.pl-kou{color:#de935f!important}.pl-mai .pl-sf{color:#c66!important}.pl-mb{color:#b5bd68!important;font-weight:700!important}.pl-mc{color:#b294bb!important}.pl-mh .pl-pdh{color:#de935f!important}.pl-mi{color:#b294bb!important;font-style:italic!important}.pl-ml{color:#b5bd68!important}.pl-mm{color:#c66!important}.pl-mp{color:#81a2be!important}.pl-mp1 .pl-sf{color:#81a2be!important}.pl-mq{color:#de935f!important}.pl-mr{color:#b294bb!important}.pl-ms{color:#b294bb!important}.pl-pdb{color:#b5bd68!important;font-weight:700!important}.pl-pdc{color:#969896!important;font-style:italic!important}.pl-pdc1{color:#de935f!important}.pl-pde{color:#de935f!important}.pl-pdi{color:#b294bb!important;font-style:italic!important}.pl-pds{color:#b5bd68!important}.pl-pdv{color:#c66!important}.pl-pse{color:#de935f!important}.pl-pse .pl-s2{color:#de935f!important}.pl-s{color:#b294bb!important}.pl-s1{color:#b5bd68!important}.pl-s2{color:#c5c8c6!important}.pl-mp .pl-s3{color:#b294bb!important}.pl-s3{color:#81a2be!important}.pl-sc{color:#c5c8c6!important}.pl-scp{color:#de935f!important}.pl-sf{color:#dad085!important}.pl-smc{color:#f0c674!important}.pl-smi{color:#c5c8c6!important}.pl-smp{color:#c5c8c6!important}.pl-sok{color:#b294bb!important}.pl-sol{color:#b5bd68!important}.pl-som{color:#c66!important}.pl-sr{color:#c66!important}.pl-sra{color:#b294bb!important}.pl-src{color:#b294bb!important}.pl-sre{color:#b294bb!important}.pl-st{color:#b294bb!important}.pl-stj{color:#c5c8c6!important}.pl-stp{color:#de935f!important}.pl-sv{color:#de935f!important}.pl-v{color:#de935f!important}.pl-vi{color:#de935f!important}.pl-vo{color:#c66!important}.pl-vpf{color:#de935f!important}.pl-mi1{color:#8f9d6a!important;background:rgba(0,64,0,.5)!important}.pl-mdht{color:#8f9d6a!important;background:rgba(0,64,0,.5)!important}.pl-md{color:#c66!important;background:rgba(64,0,0,.5)!important}.pl-mdhf{color:#c66!important;background:rgba(64,0,0,.5)!important}.pl-mdr{color:#de935f!important;font-weight:400!important}.pl-mdh{color:#c66!important;font-weight:400!important}.pl-mdi{color:#c66!important;font-weight:400!important}.pl-ib{background-color:#c66!important}.pl-id{background-color:#c66!important;color:#fff!important}.pl-ii{background-color:#c66!important;color:#fff!important}.pl-iu{background-color:#c66!important}.pl-mo{color:#c5c8c6!important}.pl-mri{color:#de935f!important}.pl-ms1{background-color:#c5c8c6!important}.pl-va{color:#de935f!important}.pl-vpu{color:#de935f!important}.pl-entl{color:#c5c8c6!important}.CodeMirror-gutters{background:#222!important;border-right:1px solid #484848!important}.CodeMirror-guttermarker{color:#fff!important}.CodeMirror-guttermarker-subtle{color:#aaa!important}.CodeMirror-linenumber{color:#aaa!important}.CodeMirror-cursor{border-left:1px solid #fff!important}.CodeMirror-activeline-background{background:#27282e!important}.CodeMirror-matchingbracket{outline:1px solid grey!important;color:#fff!important}.cm-keyword{color:#f9ee98!important}.cm-atom{color:#fc0!important}.cm-number{color:#ca7841!important}.cm-def{color:#8da6ce!important}.cm-variable-2,span.cm-tag{color:#607392!important}.cm-variable-3,span.cm-def{color:#607392!important}.cm-operator{color:#cda869!important}.cm-comment{color:#777!important;font-style:italic!important;font-weight:400!important}.cm-string{color:#8f9d6a!important}.cm-string-2{color:#bd6b18!important}.cm-meta{background-color:#141414!important;color:#f7f7f7!important}.cm-builtin{color:#cda869!important}.cm-tag{color:#997643!important}.cm-attribute{color:#d6bb6d!important}.cm-header{color:#ff6400!important}.cm-hr{color:#aeaeae!important}.cm-link{color:#ad9361!important;font-style:italic!important;text-decoration:none!important}.cm-error{border-bottom:1px solid red!important}#notebook .highlight table{background:#1d1f21!important;color:#c5c8c6!important}.highlight .hll{background-color:#373b41!important}.highlight .c{color:#969896!important}.highlight .err{color:#c66!important}.highlight .k{color:#b294bb!important}.highlight .l{color:#de935f!important}.highlight .h,.highlight .n{color:#c5c8c6!important}.highlight .o{color:#8abeb7!important}.highlight .p{color:#c5c8c6!important}.highlight .cm{color:#969896!important}.highlight .cp{color:#969896!important}.highlight .c1{color:#969896!important}.highlight .cs{color:#969896!important}.highlight .gd{color:#c66!important}.highlight .ge{font-style:italic!important}.highlight .gh{color:#c5c8c6!important;font-weight:700!important}.highlight .gi{color:#b5bd68!important}.highlight .gp{color:#969896!important;font-weight:700!important}.highlight .gs{font-weight:700!important}.highlight .gu{color:#8abeb7!important;font-weight:700!important}.highlight .kc{color:#b294bb!important}.highlight .kd{color:#b294bb!important}.highlight .kn{color:#8abeb7!important}.highlight .kp{color:#b294bb!important}.highlight .kr{color:#b294bb!important}.highlight .kt{color:#f0c674!important}.highlight .ld{color:#b5bd68!important}.highlight .m{color:#de935f!important}.highlight .s{color:#b5bd68!important}.highlight .na{color:#81a2be!important}.highlight .nb{color:#c5c8c6!important}.highlight .nc{color:#f0c674!important}.highlight .no{color:#c66!important}.highlight .nd{color:#8abeb7!important}.highlight .ni{color:#c5c8c6!important}.highlight .ne{color:#c66!important}.highlight .nf{color:#81a2be!important}.highlight .nl{color:#c5c8c6!important}.highlight .nn{color:#f0c674!important}.highlight .nx{color:#81a2be!important}.highlight .py{color:#c5c8c6!important}.highlight .nt{color:#8abeb7!important}.highlight .nv{color:#c66!important}.highlight .ow{color:#8abeb7!important}.highlight .w{color:#c5c8c6!important}.highlight .mf{color:#de935f!important}.highlight .mh{color:#de935f!important}.highlight .mi{color:#de935f!important}.highlight .mo{color:#de935f!important}.highlight .sb{color:#b5bd68!important}.highlight .sc{color:#c5c8c6!important}.highlight .sd{color:#969896!important}.highlight .s2{color:#b5bd68!important}.highlight .se{color:#de935f!important}.highlight .sh{color:#b5bd68!important}.highlight .si{color:#de935f!important}.highlight .sx{color:#b5bd68!important}.highlight .sr{color:#b5bd68!important}.highlight .s1{color:#b5bd68!important}.highlight .ss{color:#b5bd68!important}.highlight .bp{color:#c5c8c6!important}.highlight .vc{color:#c66!important}.highlight .vg{color:#c66!important}.highlight .vi{color:#c66!important}.highlight .il{color:#de935f!important}</style><body><div class="container transition-fade" id=swup><div itemscope itemtype=http://schema.org/BlogPosting><div class=container><header class="grid center"><div class="cell menu"><h1 itemprop="name headline">Using Sqlite As A Cache In Laravel</h1></div></header><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><div class=the-loop><p class=post-info><span class=post-date itemprop=datePublished>ðŸ•’Â Â <span>October 04, 2018</span></span><div itemprop="ArticleBody text" class=main-content><p>I was playing with a new project using <a href=https://laravel.com/docs/5.7>Laravel 5.7</a> and I wanted to use <a href=https://www.sqlite.org/index.html>sqlite</a> for the <a href=https://laravel.com/docs/5.7/cache>cache feature</a> that comes with the framework. If you didn't know, Laravel allows you to choose a cache "driver" and Laravel will handle writes, reads, and even locks, using that cache.<p>By default, Laravel includes drivers for "database", "redis", "memcached", "file", and "array". In typical Laravel fashion, you can even <a href=https://laravel.com/docs/5.7/cache#adding-custom-cache-drivers>write your own drivers</a>. All you need to do is implement the <code>Illuminate\Contracts\Cache\Store</code> interface using the technology you wish to turn into a cache driver.<p>To my surprise, the "database" cache driver does not support multiple database connections. Which means whatever <code>DB_CONNECTION</code> you are using is also going to be used for the cache database driver when it is selected. I took a look to see how the "database" driver was implemented (it's in the <code>Illuminate\Cache\DatabaseStore</code> class) to see if there is any way I can make the database driver use a different connection than the one set in <code>DB_CONNECTION</code>. Looking deeper, it turns out that by extending <code>Illuminate\Cache\DatabaseStore</code>, I was able to put together a "sqlite" cache driver really quickly.<p>Before you set this all up, make sure you create the empty database. From the root of your project run: <code>touch database/cache.sqlite</code>. This creates an empty file that sqlite will mount as the database. To learn more about sqlite and how the file works, check out the page at the sqlite site about the <a href=https://www.sqlite.org/onefile.html>Single-file Cross-platform Database</a>.<p>For the next step, you will need to make sure that the <code>sqlite3</code> command line tool is installed. If you need help getting that going, <a href=https://www.sqlite.org/download.html>check out the download page for the tool</a>. Once that is installed, or if you already have it, you can then connect to the database file via the sqlite cli: <code>sqlite3 database/cache.sqlite</code>. If you want more info about the CLI tool, <a href=https://www.sqlite.org/cli.html>check out the sqlite docs</a>.<p>Finally, you need to setup that sqlite database by executing the following SQL statement:<pre class=language-sql data-lang=sql style=background:#2b303b;color:#c0c5ce><code class=language-sql data-lang=sql><span style=color:#b48ead>CREATE TABLE </span><span>`</span><span style=color:#8fa1b3>cache</span><span>` (
</span><span>   `</span><span style=color:#a3be8c>key</span><span>` STRING </span><span style=color:#b48ead>PRIMARY KEY</span><span>,
</span><span>   `</span><span style=color:#a3be8c>value</span><span>` </span><span style=color:#b48ead>TEXT </span><span>NOT </span><span style=color:#d08770>NULL</span><span>,
</span><span>   `</span><span style=color:#a3be8c>expiration</span><span>` </span><span style=color:#b48ead>INT DEFAULT </span><span style=color:#d08770>0
</span><span>);
</span></code></pre><p>This statement will update the sqlite database with the required table and columns. This SQL is the same statement that runs when the cache migrations are created via the <code>artisan</code> command. To see that the SQL statement worked, you can run the <code>.tables</code> command. You should see <code>cache</code> in the list. To close out of the sqlite cli, run <code>.exit</code>.<p>Now that everything is all setup, here is the class that implements the <code>SqliteStore</code> that allows for a sqlite driver:<pre class=language-php data-lang=php style=background:#2b303b;color:#c0c5ce><code class=language-php data-lang=php><span style=color:#ab7967>&LT?php
</span><span style=color:#65737e>// put in app\Extensions
</span><span style=color:#b48ead>namespace </span><span>App\Extensions;
</span><span>
</span><span style=color:#b48ead>use </span><span>Illuminate\Cache\</span><span style=color:#ebcb8b>DatabaseStore</span><span>;
</span><span style=color:#b48ead>use </span><span>Illuminate\Support\Facades\</span><span style=color:#ebcb8b>Config</span><span>;
</span><span>
</span><span style=color:#65737e>/**
</span><span style=color:#65737e> * SqliteStore delegates to DatabaseStore but with an sqlite connection instead
</span><span style=color:#65737e> */
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>SqliteStore </span><span style=color:#b48ead>extends </span><span style=color:#a3be8c>DatabaseStore
</span><span style=color:#eff1f5>{
</span><span style=color:#eff1f5>    </span><span style=color:#b48ead>public function </span><span style=color:#96b5b4>__construct</span><span style=color:#eff1f5>()
</span><span style=color:#eff1f5>    {
</span><span style=color:#eff1f5>        </span><span style=color:#65737e>// load the config or use the default
</span><span style=color:#eff1f5>        </span><span>$</span><span style=color:#bf616a>config </span><span>= </span><span style=color:#bf616a>config</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>cache.stores.sqlite</span><span>'</span><span style=color:#eff1f5>, [
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>driver</span><span>' => '</span><span style=color:#a3be8c>sqlite</span><span>'</span><span style=color:#eff1f5>,
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>table</span><span>' => '</span><span style=color:#a3be8c>cache</span><span>'</span><span style=color:#eff1f5>,
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>database</span><span>' => </span><span style=color:#bf616a>env</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>CACHE_DATABASE</span><span>'</span><span style=color:#eff1f5>, </span><span style=color:#bf616a>database_path</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>cache.sqlite</span><span>'</span><span style=color:#eff1f5>)),
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>prefix</span><span>' => ''</span><span style=color:#eff1f5>,
</span><span style=color:#eff1f5>        ]);
</span><span style=color:#eff1f5>
</span><span style=color:#eff1f5>        </span><span style=color:#65737e>// Set the temporary configuration
</span><span style=color:#eff1f5>        </span><span style=color:#ebcb8b>Config</span><span style=color:#eff1f5>::</span><span style=color:#bf616a>set</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>database.connections.sqlite_cache</span><span>'</span><span style=color:#eff1f5>, [
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>driver</span><span>' => '</span><span style=color:#a3be8c>sqlite</span><span>'</span><span style=color:#eff1f5>,
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>database</span><span>' => $</span><span style=color:#bf616a>config</span><span style=color:#eff1f5>[</span><span>'</span><span style=color:#a3be8c>database</span><span>'</span><span style=color:#eff1f5>],
</span><span style=color:#eff1f5>            </span><span>'</span><span style=color:#a3be8c>prefix</span><span>' => $</span><span style=color:#bf616a>config</span><span style=color:#eff1f5>[</span><span>'</span><span style=color:#a3be8c>prefix</span><span>'</span><span style=color:#eff1f5>],
</span><span style=color:#eff1f5>        ]);
</span><span style=color:#eff1f5>
</span><span style=color:#eff1f5>        </span><span>$</span><span style=color:#bf616a>connection </span><span>= </span><span style=color:#bf616a>app</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>db</span><span>'</span><span style=color:#eff1f5>)-></span><span style=color:#bf616a>connection</span><span style=color:#eff1f5>(</span><span>'</span><span style=color:#a3be8c>sqlite_cache</span><span>'</span><span style=color:#eff1f5>);
</span><span style=color:#eff1f5>        </span><span style=color:#bf616a>parent</span><span style=color:#eff1f5>::</span><span style=color:#bf616a>__construct</span><span style=color:#eff1f5>(</span><span>$</span><span style=color:#bf616a>connection</span><span style=color:#eff1f5>, </span><span>$</span><span style=color:#bf616a>config</span><span style=color:#eff1f5>[</span><span>'</span><span style=color:#a3be8c>table</span><span>'</span><span style=color:#eff1f5>], </span><span>$</span><span style=color:#bf616a>config</span><span style=color:#eff1f5>[</span><span>'</span><span style=color:#a3be8c>prefix</span><span>'</span><span style=color:#eff1f5>]);
</span><span style=color:#eff1f5>    }
</span><span style=color:#eff1f5>}
</span></code></pre><p>You may need to run <code>composer dumpautoload</code> in order for the new class to be picked up if you are creating the <code>app/Extensions</code> folder for the first time.<p>Then, add the following to your <code>AppServiceProvider@boot</code>:<pre class=language-php data-lang=php style=background:#2b303b;color:#c0c5ce><code class=language-php data-lang=php><span>// AppServiceProvider@boot
</span><span>\Cache::extend('sqlite', function ($app) {
</span><span>    return \Cache::repository(new \App\Extensions\SqliteStore);
</span><span>});
</span></code></pre><p>That's it for the code side. But we still need to setup the config so the driver details exist. Open up the <code>config/cache.php</code> file. Add these details so the config can be properly loaded:<pre class=language-php data-lang=php style=background:#2b303b;color:#c0c5ce><code class=language-php data-lang=php><span>// ... the rest of config/cache.php
</span><span>'sqlite' => [
</span><span>    'driver' => 'sqlite',
</span><span>    'table' => 'cache',
</span><span>    'database' => env('CACHE_DATABASE', database_path('cache.sqlite')),
</span><span>    'prefix' => '',
</span><span>],
</span></code></pre><p>You can then update your <code>.env</code> to have <code>CACHE_DRIVER=sqlite</code> and everything should be good!</div><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><hr><div class="media grid"><div class=media-left><a class=post-author-link href=https://twitter.com/james2doyle target=_blank> <img alt="James Doyle Profile Picture" src="https://www.gravatar.com/avatar/b7375c88e1864c4ddf0d7bdab58e4cca?s=120&d=mm&r=g" height=120 width=120> </a></div><div class="media-body cell -9of12"><div class=media-heading><h3 itemprop="author publisher creator provider">James Doyle</h3></div><div class=media-content><p>I'm a full-stack developer, co-organizer of <a title="PHP Vancouver" href=https://www.meetup.com/vancouver-php target=_blank>PHP Vancouver</a> meetup, and winner of a <a title="Canadian Developer 30 under 30 award" href=http://www.canadianbusiness.com/innovation/developer-30-under-30-gallery/image/20/ target=_blank>Canadian Developer 30 under 30 award</a>. I'm a huge Open Source advocate and contributor to a lot of projects in my community. When I am not sitting at a computer, I'm trying to perfect some other skill.</div></div></div><hr><div id=disqus_thread itemprop=comment></div><script>(function(){var a=document.createElement('script');a.type='text/javascript';a.async=true;a.src='//ohdoylerules.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a class=dsq-brlink href=https://disqus.com>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div><script src=https://unpkg.com/swup@4.6.1/dist/Swup.umd.js></script><script>const swup=new Swup({native:true});function handleGists(){const a=document.querySelectorAll('.iframes');[...a].forEach(function(b){b.onload=function(){b.style.height=b.contentWindow.document.body.scrollHeight+ 'px'};b.style.height=b.contentWindow.document.body.scrollHeight+ 'px'})}document.addEventListener('DOMContentLoaded',handleGists);swup.hooks.on('visit:end',handleGists,{priority:100})</script>