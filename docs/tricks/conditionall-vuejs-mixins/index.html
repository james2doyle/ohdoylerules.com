<!doctype html><html lang=en><head><meta charset=utf-8><meta content=public http-equiv=Cache-control><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,maximum-scale=5" name=viewport><title>Conditional Vue.js Mixins | OhDoyleRules</title><meta content="Conditional Vue.js Mixins | OhDoyleRules" name=twitter:title><meta content=KM-5h_iJ7JJsGeUp4ncEoYCBKft1ko1A4gBpjIzT0p4 name=google-site-verification><meta content="Conditional Vue.js Mixins" itemprop=name><meta content=OhDoyleRules property=og:site_name><meta content=https://ohdoylerules.com/tricks/conditionall-vuejs-mixins/ itemprop=url><meta content=james2doyle@gmail.com itemprop=email><meta content=https://ohdoylerules.com/tricks/conditionall-vuejs-mixins/ property=og:url><meta itemprop="image logo" content=/icons/logo.png><meta content=/icons/logo.png property=og:image><link href=/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#333333 href=/icons/safari-pinned-tab.svg rel=mask-icon><link href=/icons/favicon.ico rel=icon sizes=any><link href=/icons/favicon.svg rel=icon type=image/svg+xml><meta content=/browserconfig.xml name=msapplication-config><meta content=#ffffff name=msapplication-TileColor><meta content=#ffffff name=theme-color><meta content=summary name=twitter:card><meta content=@james2doyle name=twitter:site><meta content="Conditional Vue.js Mixins" name=twitter:title><meta content=@james2doyle name=twitter:creator><meta content=/icons/logo.png name=twitter:image><meta content=/ name=twitter:domain><link href=/icons/logo.svg rel=icon><meta content="How to use commonjs modules as vue.js mixins and how to conditionally load mixins on a per-page-basis." name=description><meta content="How to use commonjs modules as vue.js mixins and how to conditionally load mixins on a per-page-basis." itemprop=description><meta content="How to use commonjs modules as vue.js mixins and how to conditionally load mixins on a per-page-basis." property=og:description><meta content="How to use commonjs modules as vue.js mixins and how to conditionally load mixins on a per-page-basis." name=twitter:description><link href=https://c.disquscdn.com rel=dns-prefetch><meta content=article property=og:type><meta content="Conditional Vue.js Mixins | OhDoyleRules" property=og:title><meta content="james2doyle@gmail.com James Doyle" property=article:author><meta content="nodejs, vuejs, require, mixin, conditional" itemprop=keywords><meta content="nodejs, vuejs, require, mixin, conditional" property=article:tag><meta content="nodejs, vuejs, require, mixin, conditional" property=og:keywords><link href=https://www.google-analytics.com rel=dns-prefetch><link rel="shortcut icon" href=/favicon.ico><link href=https://ohdoylerules.com/tricks/conditionall-vuejs-mixins/ rel=canonical><link href=https://ohdoylerules.com/atom.xml rel=alternate title=atom type=application/atom+xml><style>:root{--b-font-main:system-ui,sans-serif;--b-font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--b-txt:#dcd7ba;--b-bg-1:#18171f;--b-bg-2:#2d4f67;--b-line:#727169;--b-link:#7fb4ca;--b-btn-bg:#2d4f67;--b-btn-txt:#c8c093;--b-focus:#2d4f67;--b-accent-1:#e6c384;--b-accent-2:#c34043;--b-selection-color:#c8c093;--b-selection-bg:#2d4f67}*,:after,:before{box-sizing:border-box}:selection{color:var(--b-selection-color);background-color:var(--b-selection-bg)}html:focus-within{scroll-behavior:smooth}body{max-width:70ch;padding:0 1rem;margin:auto;background:var(--b-bg-1);font-family:var(--b-font-main);font-feature-settings:"lnum" 1;font-variant-numeric:slashed-zero;text-rendering:geometricPrecision;line-height:1.5;color:var(--b-txt);-moz-tab-size:4;tab-size:4;word-break:break-word;overflow-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0);-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}address,audio,blockquote,dd,details,dl,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,iframe,ol,p,pre,table,ul,video{margin:0 0 1.5rem}h1,h2,h3,h4,h5,h6{line-height:1.25;margin-top:2rem;text-wrap:balance}h1{font-size:2rem}h2{font-size:1.5rem}h3{font-size:1.25rem}h4{font-size:1rem}h5{font-size:.875rem}h6{font-size:.75rem}a{color:var(--b-link);text-decoration:none}a:hover{text-decoration:underline}img,svg,video{max-width:100%;height:auto}embed,iframe,object{max-width:100%}iframe{border-style:none;width:100%;height:100%}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:700}blockquote{margin-left:0;margin-trim:block;padding:.5rem 0 .5rem 1.5rem;border-left:.25rem solid var(--b-accent-2)}blockquote p{margin-bottom:0}small{font-size:.875rem}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}hr{height:0;border:0;border-bottom:1px solid var(--b-line)}mark{background:var(--b-bg-2);border-radius:.25rem;padding:.125rem .25rem;color:var(--b-txt)}code,kbd,pre,samp,tt,var{background:var(--b-bg-2);border-radius:.25rem;padding:.125rem .25rem;font-family:var(--b-font-mono);font-size:.875em}pre{padding:1rem;overflow:auto;white-space:pre}pre code{padding:0;background-color:inherit}p code{background-color:var(--b-bg-2);color:var(--b-accent-1)}details{display:block;padding:.5rem 1rem;background:var(--b-bg-2);border:1px solid var(--b-line);border-radius:.25rem;margin-trim:block}details[open]>summary{margin-bottom:1.5rem}summary{display:list-item;cursor:pointer;font-weight:700}summary:focus{box-shadow:none}table{border-collapse:collapse;width:100%;text-indent:0}table caption{margin-bottom:.5rem}tr{border-bottom:1px solid var(--b-line)}td,th{padding:.5rem 0 .5rem 1rem;word-break:normal}td:first-child,th:first-child{padding-left:0}th{text-align:left}dd,ol,ul{padding-left:2rem}li>ol,li>ul{margin-bottom:0}fieldset{padding:.5rem .75rem;border:1px solid var(--b-line);border-radius:.25rem}legend{padding:0 .25rem}label{cursor:pointer;display:block;margin-bottom:.25rem}button,input,select,textarea{margin:0;padding:.5rem .75rem;max-width:100%;background:var(--b-bg-2);border:0;border-radius:.25rem;font:inherit;line-height:1.125;color:var(--b-txt)}button,select{text-transform:none}[type=date],[type=datetime-local],[type=datetime],[type=email],[type=month],[type=number],[type=password],[type=search],[type=tel],[type=text],[type=time],[type=url],[type=week],select{width:100%}[type=checkbox],[type=image],[type=radio]{cursor:pointer}[type=color]{min-height:2.125rem}select:not([multiple]):not([size]){padding-right:1.5rem;background-repeat:no-repeat;background-position:right .5rem center;-moz-appearance:none;-webkit-appearance:none;appearance:none}textarea{width:100%;resize:vertical}textarea:not([rows]){height:8rem}button{touch-action:manipulation}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;display:inline-block;text-align:center;white-space:nowrap;background:var(--b-btn-bg);color:var(--b-btn-txt);border:0;cursor:pointer;transition:opacity .25s}[type=button]:hover,[type=reset]:hover,[type=submit]:hover,button:hover{opacity:.75}[type=button][disabled],[type=reset][disabled],[type=submit][disabled],button[disabled]{opacity:.5}progress{vertical-align:baseline}[type=search]{-webkit-appearance:none;outline-offset:-2px}:-webkit-inner-spin-button,:-webkit-outer-spin-button{height:auto}:-webkit-input-placeholder{color:inherit;opacity:.5}:-webkit-search-decoration{-webkit-appearance:none}:-webkit-file-upload-button{-webkit-appearance:button;font:inherit}:-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}[aria-busy=true]{cursor:progress}[aria-disabled=true],[disabled]{cursor:not-allowed}:focus,details:focus-within{outline:none;box-shadow:0 0 0 2px var(--b-focus)}@media (prefers-reduced-motion: reduce){html:focus-within{scroll-behavior:auto}*,:after,:before{animation-delay:-1ms!important;animation-duration:1ms!important;animation-iteration-count:1!important;background-attachment:initial!important;scroll-behavior:auto!important;transition-delay:0!important;transition-duration:0!important}}select:not([multiple]):not([size]){background-image:url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23eceff4'%3E%3Cpath d='M5 6l5 5 5-5 2 1-7 7-7-7 2-1z'/%3E%3C/svg%3E")}a.none{color:inherit;border:none;opacity:1}a.none:hover {background:none;opacity:.6}.center{text-align:center}html.is-changing .transition-fade{view-transition-name:main}:view-transition-old(main){animation:fade .25s ease-in-out both}:view-transition-new(main){animation:fade .25s ease-in-out both reverse}@keyframes fade{from{opacity:1}to{opacity:0}}html.is-changing:not(.swup-native) .transition-fade {will-change:opacity;transition:.25s opacity;opacity:1}html.is-animating:not(.swup-native) .transition-fade {opacity:0}</style><style>.post-info{margin-bottom:1rem}.center img{max-width:100%;height:auto}pre code.language-diff span:nth-child(1n + 7){color:#50fa7b}iframe{border:0;margin:0;min-height:300px}.gist-iframe{background-color:white;filter:invert(1) hue-rotate(180deg) brightness(1)}body table.highlight tr:nth-child(even){background-color:#f6f8fa}body table.highlight td,body table.highlight th{border-color:rgba(27,31,35,.3)}</style><body><main class=transition-fade id=swup><header class=center><h1 itemprop="name headline">Conditional Vue.js Mixins</h1></header><hr><div itemscope itemtype=http://schema.org/BlogPosting><div><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><article><section class=post-info><span itemprop=datePublished> ðŸ•’Â Â  <time datetime=2017-05-25T00:00:00>May 25, 2017</time> </span></section><div itemprop="ArticleBody text" class=main-content><p>When building more traditional Vue.js applications, I tend to use mixins a lot. It helps split up code, speparate concerns, and can allow for some cool tricks. One that i keep using is conditionally requiring a mixin based on the details of the page.<p>Here is an example. The first module is a function that, like <code>require</code>, will load a file into the script it is being called from. The thing is, this <code>require</code> function also takes a new parameter for checking if the page URL contains a particular string or <em>array of strings</em>.<h4 id=conditionalrequire-js>conditionalRequire.js</h4><pre class=language-js data-lang=js style=background:#2b303b;color:#c0c5ce><code class=language-js data-lang=js><span style=color:#65737e>// loads mixins based on the current URL
</span><span>module.exports = </span><span style=color:#b48ead>function</span><span>(</span><span style=color:#bf616a>name</span><span>, </span><span style=color:#bf616a>filename</span><span>) {
</span><span>  </span><span style=color:#65737e>// name can be an array or single string value
</span><span>  </span><span style=color:#bf616a>name </span><span>= (typeof(</span><span style=color:#bf616a>name</span><span>) === '</span><span style=color:#a3be8c>object</span><span>') ? </span><span style=color:#ebcb8b>Array</span><span>.</span><span style=color:#8fa1b3>from</span><span>(</span><span style=color:#bf616a>name</span><span>) : [</span><span style=color:#bf616a>name</span><span>];
</span><span>  </span><span style=color:#65737e>// are there any matches?
</span><span>  </span><span style=color:#b48ead>const </span><span style=color:#bf616a>check </span><span>= </span><span style=color:#bf616a>name</span><span>.</span><span style=color:#8fa1b3>filter</span><span>((</span><span style=color:#bf616a>n</span><span>) </span><span style=color:#b48ead>=> </span><span>window.location.pathname.</span><span style=color:#8fa1b3>includes</span><span>(</span><span style=color:#bf616a>n</span><span>)).length;
</span><span>
</span><span>  </span><span style=color:#65737e>// return a no-op function for better compatibility with traditional require
</span><span>  </span><span style=color:#b48ead>return </span><span style=color:#bf616a>check </span><span>? </span><span style=color:#96b5b4>require</span><span>(</span><span style=color:#bf616a>filename</span><span>) : </span><span style=color:#b48ead>function</span><span>() { </span><span style=color:#b48ead>return </span><span>{}; };
</span><span>};
</span></code></pre><p>The next code block below would be for you main app file. This would be the file included in all of the footers on your site. Some things to assume is these modules exist in a folder called <code>mixins/</code> and that the source files in there are returning a valid object that works as a mixin.<h4 id=index-js>index.js</h4><pre style=background:#2b303b;color:#c0c5ce><code><span>// include the module from the above snippet
</span><span>const conditionalRequire = require('conditionalRequire');
</span><span>
</span><span>// create our Vue app
</span><span>const app = new Vue({
</span><span>  el: "#app",
</span><span>  data: {
</span><span>    // ...
</span><span>  },
</span><span>  mixins: [
</span><span>    require('mixins/global'), // a regular module - loaded always
</span><span>    require('mixins/navigation'), // a regular module - loaded always
</span><span>    conditionalRequire('home', 'mixins/home'), // only load when on the "/home" page
</span><span>    conditionalRequire('profile', 'mixins/profile'), // only load when on the "/profile" page
</span><span>    conditionalRequire(['about', 'contact'], 'mixins/forms') // load on "/about" and "/contact"
</span><span>  ]
</span><span>});
</span></code></pre><p>So you can see this can be a handy trick. You don't load code on pages you don't need it. There are ways to do this using components and <code>v-if</code> but it is a lot "softer" than simply never running/including code that you know is not needed.</div><p><a title="Go Back Home" href=https://ohdoylerules.com>Go home</a><hr><div class="media grid"><div class=media-left><a class=post-author-link href=https://twitter.com/james2doyle target=_blank> <img alt="James Doyle Profile Picture" src="https://www.gravatar.com/avatar/b7375c88e1864c4ddf0d7bdab58e4cca?s=120&d=mm&r=g" height=120 width=120> </a></div><div class="media-body cell -9of12"><div class=media-heading><h3 itemprop="author publisher creator provider">James Doyle</h3></div><div class=media-content><p>I'm a full-stack developer, co-organizer of <a title="PHP Vancouver" href=https://www.meetup.com/vancouver-php target=_blank>PHP Vancouver</a> meetup, and winner of a <a title="Canadian Developer 30 under 30 award" href=http://www.canadianbusiness.com/innovation/developer-30-under-30-gallery/image/20/ target=_blank>Canadian Developer 30 under 30 award</a>. I'm a huge Open Source advocate and contributor to a lot of projects in my community. When I am not sitting at a computer, I'm trying to perfect some other skill.</div></div></div></article></div></div></main><script defer src=https://unpkg.com/swup@4.8.1/dist/Swup.umd.js></script><script>function handleGists(){const a=document.querySelectorAll('.iframes');[...a].forEach(function(b){b.onload=function(){b.style.height=b.contentWindow.document.body.scrollHeight+ 16+ 'px'};b.style.height=b.contentWindow.document.body.scrollHeight+ 16+ 'px'})}document.addEventListener('DOMContentLoaded',function(){handleGists();const a=new Swup({native:true});a.hooks.on('visit:end',handleGists,{priority:100})})</script>